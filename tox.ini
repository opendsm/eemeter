[pytest]
minversion = 3.0.0
norecursedirs = .* *.egg _build
flake8-ignore =
    docs/conf.py ALL
    build/* ALL
addopts =
    --showlocals
    --ignore=setup.py
    --disable-socket
    -n4
;;; ^^^ run across -n parallel processes for pytest-xdist. to disable, call pytest with '-n0'

[flake8]
max-line-length = 100

[tox]
envlist = py{27,34,35,36},docs,flake8

[testenv]
passenv = CI TRAVIS TRAVIS_*
# include numpy for installing statsmodels
deps =
    pytest
    coveralls
    pytest-cov
    pytest-xdist
    pytest-socket
    codecov
    numpy
commands =
    coverage run --source=eemeter setup.py test
    coveralls
    codecov

[testenv:docs]
passenv = HOME
deps =
    ipykernel
    mock
    nbsphinx
    pandoc
    sphinx
    sphinx-rtd-theme
    sphinxcontrib-napoleon
commands =
    make -C docs html
whitelist_externals =
    make

[testenv:flake8]
deps =
    flake8
commands =
    flake8 eemeter --max-line-length=120

[travis]
python =
    2.7: py27
    3.4: py34
    3.5: py35, docs, flake8
    3.6: py36
